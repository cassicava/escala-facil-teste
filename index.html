<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gestor de Escalas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="css/01-main.css" />
  <link rel="stylesheet" href="css/02-layout.css" />
  <link rel="stylesheet" href="css/03-components.css" />
  <link rel="stylesheet" href="css/04-logo.css" />
  <link rel="stylesheet" href="css/05-dark-theme.css" />
  <link rel="stylesheet" href="css/06-responsive.css" />
</head>
<body>
  <header class="topbar">
    <div class="container">
      <a href="#" class="app-brand" onclick="go('home')">
        <span class="animated-brand-text">Escala F√°cil</span>
      </a>
      <nav class="tabs">
        <button class="tab-btn" data-page="turnos">
            <span class="tab-icon">üïí</span>
            <span class="tab-text">Turnos</span>
        </button>
        <button class="tab-btn" data-page="cargos">
            <span class="tab-icon">üè¢</span>
            <span class="tab-text">Cargos</span>
        </button>
        <button class="tab-btn" data-page="funcionarios">
            <span class="tab-icon">üë§</span>
            <span class="tab-text">Funcion√°rios</span>
        </button>
        <button class="tab-btn" data-page="gerar-escala">
            <span class="tab-icon">üìÖ</span>
            <span class="tab-text">Gerar Escala</span>
        </button>
        <button class="tab-btn icon-only" data-page="configuracoes" title="Configura√ß√µes">
            <span class="tab-icon">‚öôÔ∏è</span>
        </button>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="page-home" class="page active">
      <div class="welcome-container">
          <h2 id="welcomeTitle" class="welcome-title"></h2>
          <p class="welcome-subtitle">Para gerar sua primeira escala com sucesso, siga os <strong>3 passos</strong> principais abaixo na sequ√™ncia indicada.</p>
      </div>
      
      <div class="home-grid-principal">
        <a class="card home-card" data-goto="turnos"><span class="card-step">1</span><h3>üïí Turnos</h3><p>Primeiro, crie os hor√°rios de trabalho, como 'Manh√£' ou 'Noturno'.</p></a>
        <a class="card home-card" data-goto="cargos"><span class="card-step">2</span><h3>üè¢ Cargos</h3><p>Depois, crie os cargos e associe os turnos que cada um pode cumprir.</p></a>
        <a class="card home-card" data-goto="funcionarios"><span class="card-step">3</span><h3>üë§ Funcion√°rios</h3><p>Por fim, adicione seus funcion√°rios, definindo seus cargos e disponibilidade.</p></a>
      </div>
      <div class="home-grid-secundario">
        <a class="card home-card" data-goto="gerar-escala"><h3>üìÖ Gerar Nova Escala</h3><p>Com tudo configurado, selecione um cargo e o per√≠odo para gerar a escala.</p></a>
        <a class="card home-card" data-goto="escalas-salvas"><h3>üóÇÔ∏è Escalas Salvas</h3><p>Acesse e gerencie as escalas que voc√™ j√° salvou anteriormente.</p></a>
      </div>
      <div class="home-grid-terciario">
        <a class="card home-card" data-goto="configuracoes"><h3>‚öôÔ∏è Configura√ß√µes</h3><p>Personalize a apar√™ncia e gerencie os dados da aplica√ß√£o.</p></a>
      </div>
    </section>

    <section id="page-turnos" class="page">
        <h1>üïí Turnos</h1>
        <div class="card">
          <h2>Criar / Editar</h2>
          <div class="form-row"><label>Nome <input id="turnoNome" type="text" placeholder="Nome do turno (ex.: Manh√£)" /></label></div>
          <div class="form-row"><div id="turnoCorContainer"><label>Cor</label><div id="turnoCorPalette" class="color-palette"></div><input type="hidden" id="turnoCorHidden" value="#e2e8f0"></div></div>
          <div class="form-row form-row-vcenter">
              <label>In√≠cio <input id="turnoInicio" type="time" /></label>
              <label>Fim <input id="turnoFim" type="time" /></label>
              <label>Almo√ßo (min) <input id="turnoAlmoco" type="number" min="0" step="5" placeholder="Opcional" /></label>
              <span id="turnoCarga" class="muted badge">Carga: 00:00</span>
              <div id="turnoViraDia" class="badge-explanation hidden">
                <span>üåô</span>
                <span>Turno Noturno</span>
              </div>
          </div>
          
          <div class="form-section form-section-3col">
              <div class="form-section-main">
                  <div class="form-section-header">
                      <label>Descanso obrigat√≥rio?</label>
                  </div>
                  <div class="toggle-group" id="descansoToggleGroup">
                      <button type="button" class="toggle-btn active" data-value="nao">N√£o</button>
                      <button type="button" class="toggle-btn" data-value="sim">Sim</button>
                      <input type="hidden" id="descansoObrigatorioHidden" value="nao">
                  </div>
              </div>
              <div class="form-group" id="descansoHorasGroup">
                  <label>Horas de Descanso</label>
                  <input type="number" id="turnoDescansoHoras" min="1" placeholder="Ex: 36" disabled>
              </div>
              <div class="explanation-box">
                  Define o intervalo m√≠nimo em horas que um funcion√°rio precisa descansar ap√≥s concluir este turno, antes de poder iniciar qualquer outro.
              </div>
          </div>
  
          <div class="form-row">
            <button id="btnSalvarTurno" class="primary">Salvar Turno</button>
            <button id="btnCancelarEdTurno" class="secondary hidden">Cancelar Edi√ß√£o</button>
            <button id="btnLimparTurno" class="secondary ml-auto">Limpar</button>
          </div>
        </div>
        <div class="card card-lista">
          <h2>Turnos Cadastrados</h2>
          <div class="form-row"><input type="search" id="filtroTurnos" placeholder="üîé Buscar turno..." style="width: 100%;"/></div>
          <table class="table" id="tblTurnos">
            <thead>
              <tr><th>Cor</th><th>Nome</th><th>In√≠cio</th><th>Fim</th><th>Almo√ßo</th><th>Carga</th><th>Descanso</th><th>A√ß√µes</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
  
      <section id="page-cargos" class="page">
          <h1>üè¢ Cargos</h1>
          <div class="card">
            <h2>Criar / Editar Cargo</h2>
            <div class="form-row"><label>Nome <input id="cargoNome" type="text" placeholder="Nome do cargo" /></label></div>
            
            <fieldset><legend>Turnos Associados</legend>
                <div id="cargoTurnosContainer" class="check-container"></div>
            </fieldset>

            <fieldset id="cargoRegrasFieldset">
                <legend>Regras de Funcionamento do Cargo</legend>
                <div class="grid-2-col">
                    <div class="form-section-column">
                        <label class="form-label">Dias em que o cargo opera:</label>
                        <div id="cargoDiasContainer" class="dias-semana-container"></div>
                    </div>
                    <div class="form-section-column">
                        <label class="form-label">Hor√°rio de opera√ß√£o:</label>
                        <div class="form-row-aligned">
                           <div class="toggle-group" id="cargoHorarioToggle">
                                <button type="button" class="toggle-btn active" data-value="parcial">Hor√°rio Definido</button>
                                <button type="button" class="toggle-btn" data-value="24h">24 Horas</button>
                                <input type="hidden" id="cargoIs24h" value="parcial">
                            </div>
                            <div id="cargoHorarioInputs" class="form-row">
                                <label>In√≠cio <input id="cargoInicio" type="time" /></label>
                                <label>Fim <input id="cargoFim" type="time" /></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="cargoRegrasExplicacao" class="explanation-box">
                    Defina os dias e a faixa de hor√°rio em que este cargo precisa de cobertura. Isso ajudar√° o gerador de escala a entender a demanda.
                </div>
            </fieldset>

            <div class="form-row">
              <button id="btnSalvarCargo" class="primary">Salvar Cargo</button>
              <button id="btnCancelarEdCargo" class="secondary hidden">Cancelar Edi√ß√£o</button>
              <button id="btnLimparCargo" class="secondary ml-auto">Limpar</button>
            </div>
          </div>
          <div class="card card-lista">
            <h2>Cargos Cadastrados</h2>
            <div class="form-row"><input type="search" id="filtroCargos" placeholder="üîé Buscar cargo..." style="width: 100%;"/></div>
            <table class="table" id="tblCargos">
              <thead><tr><th>Nome</th><th>Turnos</th><th>Funcionamento</th><th>A√ß√µes</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
      </section>
  
      <section id="page-funcionarios" class="page">
        <h1>üë§ Funcion√°rios</h1>
        <div class="card">
          <h2>Criar / Editar</h2>
          
          <div class="form-row">
            <label class="form-field-half">Nome Completo <input id="funcNome" type="text" placeholder="Nome do funcion√°rio" /></label>
            <label>Documento <input id="funcDocumento" type="text" placeholder="Opcional (Ex: CRM 12345)" /></label>
          </div>
  
          <div class="form-row">
            <label class="form-field-half">Cargo<select id="funcCargo"><option value="">Selecione um cargo</option></select></label>
          </div>
  
          <div class="form-section">
            <div class="form-section-column">
                <div class="form-section-header">
                    <label>Tipo de Contrato</label>
                </div>
                <div class="toggle-group" id="contratoToggleGroup">
                    <button type="button" class="toggle-btn active" data-value="clt">CLT / Concursado</button>
                    <button type="button" class="toggle-btn" data-value="pj">Prestador de Servi√ßo</button>
                    <input type="hidden" id="funcContrato" value="clt">
                </div>
                <div id="contratoExplicacao" class="explanation-box">
                    Funcion√°rios <strong>CLT / Concursados</strong> seguir√£o rigorosamente as regras de descanso obrigat√≥rio cadastradas nos turnos.
                </div>
            </div>
            <div class="form-group">
                <div class="form-section-header">
                  <label>Per√≠odo da Carga Hor√°ria</label>
                </div>
                <div class="toggle-group" id="periodoHorasToggleGroup">
                    <button type="button" class="toggle-btn active" data-value="semanal">Semanal</button>
                    <button type="button" class="toggle-btn" data-value="mensal">Mensal</button>
                    <input type="hidden" id="funcPeriodoHoras" value="semanal">
                </div>
                <label style="margin-top: 12px;">Carga Hor√°ria (em horas)</label>
                <input id="funcCargaHoraria" type="number" placeholder="Ex: 44" min="1"/>
            </div>
          </div>
  
          <fieldset id="funcTurnosFieldset">
              <legend>Disponibilidade de Turnos</legend>
              <div id="funcTurnosContainer" class="turno-disponibilidade-grid">
                  <div class="turno-placeholder">
                      <p>Selecione um cargo para ver os turnos dispon√≠veis.</p>
                  </div>
              </div>
          </fieldset>
  
          <div class="form-row">
            <button id="btnSalvarFunc" class="primary">Salvar Funcion√°rio</button>
            <button id="btnCancelarEdFunc" class="secondary hidden">Cancelar Edi√ß√£o</button>
            <button id="btnLimparFunc" class="secondary ml-auto">Limpar</button>
          </div>
        </div>
        <div class="card card-lista">
          <h2>Funcion√°rios Cadastrados</h2>
          <div class="form-row"><input type="search" id="filtroFuncionarios" placeholder="üîé Buscar funcion√°rio..." style="width: 100%;"/></div>
          <table class="table" id="tblFuncionarios">
              <thead><tr><th>Nome</th><th>Documento</th><th>Contrato</th><th>Carga Hor√°ria</th><th>Turnos</th><th>A√ß√µes</th></tr></thead>
              <tbody></tbody>
          </table>
        </div>
      </section>

    <section id="page-gerar-escala" class="page">
        <h1>üìÖ Gerar Nova Escala</h1>
        <div class="card">
          <h2>Nova Escala (Wizard)</h2>
          <div id="wiz1" class="wizard-step active">
            <h3>1) Selecione o Cargo</h3>
            <select id="escCargo"></select>
            <div class="form-row">
              <button class="primary next" data-next="wiz2">Pr√≥ximo</button>
            </div>
          </div>
          <div id="wiz2" class="wizard-step">
            <h3>2) Per√≠odo</h3>
            <div class="form-row">
              <label>In√≠cio <input type="date" id="escIni" /></label>
              <label>Fim <input type="date" id="escFim" /></label>
            </div>
            <div class="form-row">
              <button class="secondary prev" data-prev="wiz1">Voltar</button>
              <button class="primary next" data-next="wiz3">Pr√≥ximo</button>
            </div>
          </div>
          <div id="wiz3" class="wizard-step">
            <h3>3) Folgas & F√©rias</h3>
            <div id="folgasFeriasContainer" class="stack"></div>
            <div class="form-row">
              <button class="secondary prev" data-prev="wiz2">Voltar</button>
              <button id="btnGerarEscala" class="primary">Gerar Escala</button>
            </div>
          </div>
        </div>
        <div id="escalaView" class="card hidden">
          <div class="header-row">
            <h2>Visualiza√ß√£o da Escala</h2>
            <div class="actions">
              <button id="btnSalvarEscala" class="primary">Salvar</button>
              <button id="btnCopiarEscala" class="secondary">Copiar +7 dias</button>
              <button id="btnExcluirEscala" class="danger">Excluir</button>
            </div>
          </div>
          <div id="escalaTabelaWrap"></div>
          <div id="escalaResumo" class="muted"></div>
        </div>
    </section>
    
    <section id="page-escalas-salvas" class="page">
        <h1>üóÇÔ∏è Escalas Salvas</h1>
        <div class="card">
          <h2>Lista de Escalas</h2>
          <ul id="listaEscalas" class="list"></ul>
        </div>
    </section>

    <section id="page-configuracoes" class="page">
        <h1>‚öôÔ∏è Configura√ß√µes</h1>
        <div class="card">
            <h2>Prefer√™ncias</h2>
            <div class="form-row">
                <label>Seu Nome ou Nome da Empresa
                    <input type="text" id="configNome" placeholder="Digite um nome para a sauda√ß√£o" />
                </label>
            </div>
            <div class="form-row">
                <label>Apar√™ncia</label>
                <div class="toggle-group" id="themeToggleGroup">
                    <button type="button" class="toggle-btn" data-value="light">Claro</button>
                    <button type="button" class="toggle-btn" data-value="dark">Escuro</button>
                </div>
            </div>
            <div class="form-row">
                <button id="btnSalvarConfig" class="primary">Salvar</button>
            </div>
        </div>
        <div class="card card-lista">
            <h2>Backup de Dados</h2>
            <p class="muted">Aqui voc√™ poder√° exportar todos os seus dados para um arquivo de backup ou importar dados de um arquivo salvo anteriormente.</p>
        </div>
    </section>

  </main>

  <footer class="container footer">
    <small>HTML + CSS + JS ‚Ä¢ Dados persistem no navegador via <code>localStorage</code></small>
  </footer>

  <div id="modalBackdrop" class="modal-backdrop hidden">
    <div id="modal" class="modal">
        <h3 id="modalTitle"></h3>
        <p id="modalMessage"></p>
        <div class="modal-actions">
            <button id="modalCancel" class="secondary">Cancelar</button>
            <button id="modalConfirm" class="primary">Confirmar</button>
        </div>
    </div>
  </div>

  <div id="toast" class="toast hidden">
    <p id="toastMessage"></p>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/turnos.js"></script>
  <script src="js/cargos.js"></script>
  <script src="js/funcionarios.js"></script>
  <script src="js/escalas.js"></script>
  <script src="js/configuracoes.js"></script>
  <script src="js/main.js"></script>
</body>
</html>