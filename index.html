<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <title>Gestor de Escalas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/01-main.css" />
    <link rel="stylesheet" href="css/02-layout.css" />
    <link rel="stylesheet" href="css/03-components.css" />
    <link rel="stylesheet" href="css/04-logo.css" />
    <link rel="stylesheet" href="css/05-dark-theme.css" />
    <link rel="stylesheet" href="css/06-responsive.css" />
    <link rel="stylesheet" href="css/07-gerador-escala.css" />
    <link rel="stylesheet" href="css/08-welcome.css" />
    <link rel="stylesheet" href="css/09-editor-manual.css" />
    <link rel="stylesheet" href="css/10-animations.css" />
</head>

<body>

    <div id="welcome-overlay">
        <div class="welcome-card">

            <div id="welcome-step-1" class="welcome-step">
                <h2 class="welcome-title">Boas-vindas ao <span class="animated-brand-text"
                        style="font-size: inherit;">Escala Fácil</span>!</h2>
                <p class="welcome-subtitle">Sua nova ferramenta para criar escalas de trabalho de forma inteligente e
                    sem estresse.</p>
                <button id="welcome-start-btn" class="welcome-btn welcome-btn-primary">Começar</button>
            </div>

            <div id="welcome-step-2" class="welcome-step">
                <h2 class="welcome-title">Vamos personalizar sua experiência</h2>
                <div class="welcome-form-group">
                    <label for="welcome-nome-input" class="welcome-label">Primeiro, como podemos te chamar?</label>
                    <input type="text" id="welcome-nome-input" class="welcome-input"
                        placeholder="Seu nome ou nome da empresa">
                </div>
                <div class="welcome-form-group">
                    <label class="welcome-label">Qual aparência você prefere?</label>
                    <div class="toggle-group" id="welcomeThemeToggle">
                        <button type="button" class="toggle-btn" data-value="light">☀️ Claro</button>
                        <button type="button" class="toggle-btn" data-value="dark">🌙 Escuro</button>
                    </div>
                </div>
                <button id="welcome-personalizacao-next" class="welcome-btn welcome-btn-primary">Próximo</button>
                <button class="welcome-btn-secondary welcome-btn-back" data-to-step="1">
                    < Voltar</button>
            </div>

            <div id="welcome-step-3" class="welcome-step">
                <h2 class="welcome-title">Como vamos simplificar o seu dia a dia:</h2>
                <ul class="welcome-features-list">
                    <li class="welcome-feature-item"><span>🚀</span>
                        <div><strong>Geração Inteligente:</strong> Crie escalas complexas em minutos, não em horas.
                        </div>
                    </li>
                    <li class="welcome-feature-item"><span>✅</span>
                        <div><strong>Prevenção de Erros:</strong> Nosso algoritmo evita conflitos e garante o descanso
                            obrigatório da equipe.</div>
                    </li>
                    <li class="welcome-feature-item"><span>🎨</span>
                        <div><strong>Edição Rápida e Visual:</strong> Use a Caixa de Ferramentas para ajustar, trocar e
                            alocar turnos de forma ágil e intuitiva.</div>
                    </li>
                    <li class="welcome-feature-item"><span>📂</span>
                        <div><strong>Tudo Centralizado:</strong> Mantenha turnos, cargos e funcionários organizados em
                            um só lugar.</div>
                    </li>
                </ul>
                <button id="welcome-proposta-next" class="welcome-btn welcome-btn-primary">Próximo</button>
                <button class="welcome-btn-secondary welcome-btn-back" data-to-step="2">
                    < Voltar</button>
            </div>

            <div id="welcome-step-4" class="welcome-step">
                <h2 class="welcome-title">Quase pronto!</h2>
                <p class="welcome-subtitle">Para continuar, por favor, aceite nossos termos de uso.</p>
                <div class="welcome-terms">
                    <input type="checkbox" id="welcome-terms-checkbox">
                    <label for="welcome-terms-checkbox">Eu li e concordo com os <a href="#"
                            id="welcome-terms-link">Termos de Uso</a>.</label>
                </div>
                <button id="welcome-finish-btn" class="welcome-btn welcome-btn-primary">Concluir e Começar a
                    Usar!</button>
                <button class="welcome-btn-secondary welcome-btn-back" data-to-step="3">
                    < Voltar</button>
            </div>

            <div class="welcome-progress-indicator">
                <span class="progress-dot" data-step="1"></span>
                <span class="progress-dot" data-step="2"></span>
                <span class="progress-dot" data-step="3"></span>
                <span class="progress-dot" data-step="4"></span>
            </div>

        </div>
    </div>
    <nav id="sidebar">
        <a href="#" class="app-brand" onclick="go('home')">
            <span class="logo-compact">EF</span>
            <span class="logo-full animated-brand-text">Escala Fácil</span>
        </a>

        <div class="sidebar-links">
            <button class="tab-btn active" data-page="home">
                <span class="tab-icon">🏠</span>
                <span class="tab-text">Início</span>
            </button>
            <button class="tab-btn" data-page="turnos">
                <span class="tab-icon">🕒</span>
                <span class="tab-text">Turnos</span>
            </button>
            <button class="tab-btn" data-page="cargos">
                <span class="tab-icon">🏥</span> <span class="tab-text">Cargos</span>
            </button>
            <button class="tab-btn" data-page="funcionarios">
                <span class="tab-icon">👨‍⚕️</span> <span class="tab-text">Funcionários</span>
            </button>
            <button class="tab-btn" data-page="gerar-escala">
                <span class="tab-icon">📅</span>
                <span class="tab-text">Gerar Escala</span>
            </button>
            <button class="tab-btn" data-page="escalas-salvas">
                <span class="tab-icon">🗂️</span>
                <span class="tab-text">Escalas Salvas</span>
            </button>
        </div>

        <button class="tab-btn" data-page="configuracoes" title="Configurações">
            <span class="tab-icon">⚙️</span>
            <span class="tab-text">Configurações</span>
        </button>
    </nav>

    <main class="container">
        <section id="page-home" class="page active">
            <div class="welcome-container">
                <h2 id="welcomeTitle" class="welcome-title"></h2>
                <p class="welcome-subtitle">Para gerar sua primeira escala com sucesso, siga os <strong>3
                        passos</strong> principais abaixo na sequência indicada.</p>
            </div>

            <div class="home-grid-principal">
                <a class="card home-card" data-goto="turnos"><span class="card-step">Passo 1</span>
                    <h3>🕒 Turnos</h3>
                    <p>Primeiro, crie os horários de trabalho, como 'Manhã' ou 'Noturno'.</p>
                </a>
                <a class="card home-card" data-goto="cargos"><span class="card-step">Passo 2</span>
                    <h3>🏥 Cargos</h3>
                    <p>Depois, crie os cargos e associe os turnos que cada um pode cumprir.</p>
                </a>
                <a class="card home-card" data-goto="funcionarios"><span class="card-step">Passo 3</span>
                    <h3>👨‍⚕️ Funcionários</h3>
                    <p>Por fim, adicione seus funcionários, definindo seus cargos e disponibilidade.</p>
                </a>
            </div>
            <div class="home-grid-secundario">
                <a class="card home-card card-animated-border" data-goto="gerar-escala">
                    <h3>📅 Gerar Nova Escala</h3>
                    <p>Com tudo configurado, selecione um cargo e o período para gerar a escala.</p>
                </a>
                <a class="card home-card" data-goto="escalas-salvas">
                    <h3>🗂️ Escalas Salvas</h3>
                    <p>Acesse e gerencie as escalas que você já salvou anteriormente.</p>
                </a>
            </div>
            <div class="home-grid-terciario">
                <a class="card home-card" data-goto="configuracoes">
                    <h3>⚙️ Configurações</h3>
                    <p>Personalize a aparência e gerencie os dados da aplicação.</p>
                </a>
            </div>
        </section>

        <section id="page-turnos" class="page">
            <h1>🕒 Turnos</h1>
            <div class="card">
                <h2>Criar / Editar</h2>

                <div class="turno-header-grid">
                    <label>Nome do Turno
                        <input id="turnoNome" type="text" placeholder="Ex.: Manhã" style="width: 100%;" />
                    </label>
                    <label>Sigla
                        <input id="turnoSigla" type="text" placeholder="M1" maxlength="2" style="width: 100%;" />
                    </label>
                    <div class="explanation-box" style="margin: 0;">
                        Use uma sigla de 2 letras para compactar a escala.
                    </div>
                </div>

                <div class="form-row">
                    <div id="turnoCorContainer"><label>Cor</label>
                        <div id="turnoCorPalette" class="color-palette"></div><input type="hidden" id="turnoCorHidden"
                            value="#e2e8f0">
                    </div>
                </div>
                <div class="form-row form-row-vcenter">
                    <label>Início <input id="turnoInicio" type="time" /></label>
                    <label>Fim <input id="turnoFim" type="time" /></label>
                    <label>Almoço (min) <input id="turnoAlmoco" type="number" min="0" step="5"
                            placeholder="Opcional" /></label>
                    <span id="turnoCarga" class="muted badge">Carga: 00:00</span>
                    <div id="turnoViraDia" class="badge-explanation hidden">
                        <span>🌙</span>
                        <span>Turno Noturno</span>
                    </div>
                </div>

                <fieldset>
                    <legend>Descanso Obrigatório</legend>
                    <div class="grid-2-col-uneven">
                        <div class="form-section-column">
                            <div class="toggle-group" id="descansoToggleGroup">
                                <button type="button" class="toggle-btn" data-value="nao">Não</button>
                                <button type="button" class="toggle-btn" data-value="sim">Sim</button>
                                <input type="hidden" id="descansoObrigatorioHidden" value="nao">
                            </div>
                            <div id="descansoHorasGroup" class="expandable-content hidden-height" style="width: 100%;">
                                <label>Horas de Descanso</label>
                                <input type="number" id="turnoDescansoHoras" min="1" placeholder="Ex: 36" disabled
                                    style="width: 100%;">
                            </div>
                        </div>
                        <div class="explanation-box">
                            Define o intervalo mínimo em horas que um funcionário precisa descansar após concluir este
                            turno, antes de poder iniciar qualquer outro.
                        </div>
                    </div>
                </fieldset>

                <div class="form-row">
                    <button id="btnSalvarTurno" class="primary">💾 Salvar Turno</button>
                    <button id="btnCancelarEdTurno" class="secondary hidden">Cancelar Edição</button>
                    <button id="btnLimparTurno" class="secondary ml-auto">🗑️ Limpar</button>
                </div>
            </div>
            <div class="card card-lista">
                <h2>Turnos Cadastrados</h2>
                <div class="form-row"><input type="search" id="filtroTurnos" placeholder="🔎 Buscar turno..."
                        style="width: 100%;" /></div>
                <table class="table" id="tblTurnos">
                    <thead>
                        <tr>
                            <th>Cor</th>
                            <th>Nome</th>
                            <th>Sigla</th>
                            <th>Início</th>
                            <th>Fim</th>
                            <th>Almoço</th>
                            <th>Carga</th>
                            <th>Descanso</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="page-cargos" class="page">
            <h1>🏥 Cargos</h1>
            <div class="card">
                <h2>Criar / Editar Cargo</h2>
                <div class="form-row"><label>Nome <input id="cargoNome" type="text"
                            placeholder="Nome do cargo" /></label></div>

                <fieldset>
                    <legend>Turnos Associados</legend>
                    <div id="cargoTurnosContainer" class="check-container"></div>
                </fieldset>

                <fieldset id="cargoRegrasFieldset">
                    <legend>Regras de Funcionamento do Cargo</legend>
                    <div class="grid-2-col">
                        <div class="form-section-column">
                            <label class="form-label">Dias em que o cargo opera:</label>
                            <div id="cargoDiasContainer" class="dias-semana-container"></div>
                        </div>
                        <div class="form-section-column">
                            <label class="form-label">Horário de operação:</label>
                            <div class="form-row-aligned">
                                <div class="toggle-group" id="cargoHorarioToggle">
                                    <button type="button" class="toggle-btn" data-value="24h">24 Horas</button>
                                    <button type="button" class="toggle-btn" data-value="parcial">Horário
                                        Definido</button>
                                    <input type="hidden" id="cargoIs24h" value="24h">
                                </div>
                                <div id="cargoHorarioInputs" class="form-row expandable-content hidden-height">
                                    <label>Início <input id="cargoInicio" type="time" /></label>
                                    <label>Fim <input id="cargoFim" type="time" /></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="cargoRegrasExplicacao" class="explanation-box">
                        Defina os dias e a faixa de horário em que este cargo precisa de cobertura. Isso ajudará o
                        gerador de escala a entender a demanda.
                    </div>
                </fieldset>

                <div class="form-row">
                    <button id="btnSalvarCargo" class="primary">💾 Salvar Cargo</button>
                    <button id="btnCancelarEdCargo" class="secondary hidden">Cancelar Edição</button>
                    <button id="btnLimparCargo" class="secondary ml-auto">🗑️ Limpar</button>
                </div>
            </div>
            <div class="card card-lista">
                <h2>Cargos Cadastrados</h2>
                <div class="form-row"><input type="search" id="filtroCargos" placeholder="🔎 Buscar cargo..."
                        style="width: 100%;" /></div>
                <table class="table" id="tblCargos">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Turnos</th>
                            <th>Funcionamento</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="page-funcionarios" class="page">
            <h1>👨‍⚕️ Funcionários</h1>
            <div class="card">
                <h2>Criar / Editar</h2>

                <div class="form-row">
                    <label class="form-field-half">Nome Completo
                        <input id="funcNome" type="text" placeholder="Nome do funcionário" />
                    </label>
                    <label>Cargo
                        <select id="funcCargo"></select>
                    </label>
                    <label>Documento
                        <input id="funcDocumento" type="text" placeholder="Opcional (Ex: CRM 12345)" />
                    </label>
                </div>

                <fieldset>
                    <legend>Detalhes do Contrato e Carga Horária</legend>
                    <div class="grid-3-col">
                        <div class="form-section-column">
                            <div class="form-section-header">
                                <label>Tipo de Contrato</label>
                            </div>
                            <div class="toggle-group" id="contratoToggleGroup">
                                <button type="button" class="toggle-btn" data-value="clt">CLT / Concursado</button>
                                <button type="button" class="toggle-btn" data-value="pj">Prestador de Serviço</button>
                                <input type="hidden" id="funcContrato" value="clt">
                            </div>
                            <div id="contratoExplicacao" class="explanation-box">
                                Funcionários <strong>CLT / Concursados</strong> seguirão rigorosamente as regras de
                                descanso obrigatório.
                            </div>
                        </div>
                        <div class="form-section-column">
                            <div class="form-section-header">
                                <label>Período da Carga Horária</label>
                            </div>
                            <div class="toggle-group" id="periodoHorasToggleGroup">
                                <button type="button" class="toggle-btn" data-value="semanal">Semanal</button>
                                <button type="button" class="toggle-btn" data-value="mensal">Mensal</button>
                                <input type="hidden" id="funcPeriodoHoras" value="semanal">
                            </div>
                            <label style="margin-top: 4px;">Carga Horária (em horas)
                                <input id="funcCargaHoraria" type="number" placeholder="Ex: 44" min="1"
                                    style="width: 100%;" />
                            </label>
                        </div>
                        <div class="form-section-column">
                            <div class="form-section-header">
                                <label>Faz Hora Extra?</label>
                            </div>
                            <div class="toggle-group" id="horaExtraToggleGroup">
                                <button type="button" class="toggle-btn" data-value="nao">Não</button>
                                <button type="button" class="toggle-btn" data-value="sim">Sim</button>
                                <input type="hidden" id="funcHoraExtra" value="nao">
                            </div>
                            <div class="explanation-box">
                                Se habilitado, o algoritmo poderá escalar este funcionário além de sua carga horária.
                            </div>
                        </div>
                    </div>
                </fieldset>

                <fieldset id="funcTurnosFieldset">
                    <legend>Disponibilidade de Turnos</legend>
                    <div id="funcTurnosContainer" class="turno-disponibilidade-grid">
                        <div class="turno-placeholder">
                            <p>Selecione um cargo para ver os turnos disponíveis.</p>
                        </div>
                    </div>
                </fieldset>

                <div class="form-row">
                    <button id="btnSalvarFunc" class="primary">💾 Salvar Funcionário</button>
                    <button id="btnCancelarEdFunc" class="secondary hidden">Cancelar Edição</button>
                    <button id="btnLimparFunc" class="secondary ml-auto">🗑️ Limpar</button>
                </div>
            </div>
            <div class="card card-lista">
                <h2>Funcionários Cadastrados</h2>
                <div class="form-row"><input type="search" id="filtroFuncionarios"
                        placeholder="🔎 Buscar funcionário..." style="width: 100%;" /></div>
                <table class="table" id="tblFuncionarios">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Contrato</th>
                            <th>Carga Horária</th>
                            <th>H. Extra</th>
                            <th>Turnos</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="page-gerar-escala" class="page">
            <h1>Gerar Nova Escala</h1>
            <div id="gerador-container">
                <div id="passo1-selecao" class="wizard-step active card card-animated-border">
                    <h3>Passo 1: Selecione o Período e Feriados</h3>
                    <div class="passo1-grid">
                        <fieldset class="regras-fieldset">
                            <legend>Cargo e Período</legend>
                            <div class="form-row">
                                <label style="width:100%">Cargo para a escala
                                    <select id="escCargo"></select>
                                </label>
                            </div>
                            <div class="form-row form-row-vcenter">
                                <label>Data de Início <input type="date" id="escIni"></label>
                                <label>Data de Fim <input type="date" id="escFim" disabled></label>
                            </div>
                            <span id="escResumoDias" class="dias-resumo-box">Selecione o período para ver a duração da
                                escala.</span>
                        </fieldset>

                        <fieldset class="regras-fieldset" id="feriados-fieldset" disabled>
                            <legend>Feriados no período</legend>
                            <div class="form-row" style="gap: 8px;">
                                <input type="date" class="input-sm" id="feriado-data-input">
                                <input type="text" id="feriado-nome-input" placeholder="Nome do feriado"
                                    style="flex-grow: 1;">
                                <div class="toggle-group" id="feriado-trabalha-toggle">
                                    <button type="button" class="toggle-btn" data-value="sim">Sim, Trabalham</button>
                                    <button type="button" class="toggle-btn" data-value="nao">Não, Folga</button>
                                </div>
                            </div>
                            <div class="form-row-aligned" style="margin-top: 12px;">
                                <label>Descontar horas da carga horária?</label>
                                <div class="toggle-group" id="feriado-descontar-toggle">
                                    <button type="button" class="toggle-btn" data-value="nao">Não</button>
                                    <button type="button" class="toggle-btn" data-value="sim">Sim</button>
                                </div>
                                <div id="feriado-horas-desconto-container" class="form-row"
                                    style="margin: 0; display: none;">
                                    <input type="number" id="feriado-horas-desconto" class="input-sm"
                                        placeholder="Horas" min="0" />
                                </div>
                            </div>
                            <div class="form-row" style="margin-top: 16px;">
                                <button class="secondary ml-auto" id="btn-add-feriado">Adicionar Feriado</button>
                            </div>
                            <div class="feriados-tags" id="feriados-tags-container"></div>
                            <div class="explanation-box" style="margin-top: 12px;">
                                Se o feriado for **"Não, Folga"**, o gerador não escalará ninguém neste dia. Se for
                                **"Sim, Trabalham"**, o dia será incluído na escala e destacado com a cor azul para
                                fácil identificação.
                            </div>
                            <div class="explanation-box" style="margin-top: 12px;">
                                A opção de **descontar horas** é independente da folga e serve para ajustar a carga
                                horária total da escala.
                            </div>
                        </fieldset>
                    </div>
                    <div class="form-row">
                        <button id="btn-goto-passo2" class="primary ml-auto">Próximo Passo ></button>
                    </div>
                </div>

                <div id="passo2-cobertura" class="wizard-step card card-animated-border">
                    <button id="btn-back-passo1" class="secondary button-voltar">
                        < Voltar</button>
                            <h3>Passo 2: Defina Cobertura e Regras Gerais</h3>
                            <div class="passo2-grid">
                                <fieldset class="regras-fieldset">
                                    <legend>Cobertura de Turnos</legend>
                                    <div class="form-row-aligned">
                                        <label>Definir cobertura manualmente?</label>
                                        <div class="toggle-group" id="cobertura-manual-toggle">
                                            <button type="button" class="toggle-btn" data-value="nao">Não</button>
                                            <button type="button" class="toggle-btn" data-value="sim">Sim</button>
                                        </div>
                                    </div>
                                    <div id="cobertura-manual-container" class="hidden">
                                        <div id="cobertura-turnos-container"></div>
                                        <div class="explanation-box" style="margin-top: 12px;">
                                            Defina o número <strong>mínimo</strong> de funcionários necessários para
                                            cada turno. O algoritmo tentará preencher esta demanda.
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset class="regras-fieldset">
                                    <legend>Regras da Escala</legend>
                                    <div class="regra-item">
                                        <div class="form-row-aligned">
                                            <label for="maxDiasConsecutivos">Máximo de dias de trabalho
                                                consecutivos:</label>
                                            <input type="number" id="maxDiasConsecutivos" class="input-sm" value="6"
                                                min="1">
                                        </div>
                                    </div>
                                    <div class="regra-item">
                                        <div class="form-row-aligned">
                                            <label for="minFolgasFimSemana">Mínimo de fins de semana de folga por
                                                mês:</label>
                                            <input type="number" id="minFolgasFimSemana" class="input-sm" value="2"
                                                min="0">
                                        </div>
                                    </div>
                                    <div class="regra-item">
                                        <div class="form-row-aligned">
                                            <label>Otimizar distribuição de folgas?</label>
                                            <div class="toggle-group" id="otimizar-folgas-toggle">
                                                <button type="button" class="toggle-btn" data-value="nao">Não</button>
                                                <button type="button" class="toggle-btn" data-value="sim">Sim</button>
                                            </div>
                                        </div>
                                        <div class="explanation-box" style="margin-top: 12px;">
                                            Se ativado, o gerador tentará agrupar as folgas regulares do funcionário em
                                            períodos consecutivos para criar blocos de descanso maiores.
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="form-row">
                                <button id="btn-goto-passo3" class="primary ml-auto">Próximo Passo ></button>
                            </div>
                </div>
                <div id="passo3-excecoes" class="wizard-step card card-animated-border">
                    <button id="btn-back-passo2" class="secondary button-voltar">
                        < Voltar</button>
                            <h3>Passo 3: Configure Férias e Folgas para a Equipe</h3>
                            <p class="muted">Marque os dias em que funcionários específicos não devem ser escalados.</p>
                            <div id="excecoes-funcionarios-container"></div>
                            <div class="explanation-box" style="margin-top: 12px;">
                                O campo **"Carência"** define um período de dias de descanso **após o término** de
                                férias ou afastamento. Durante a carência, o funcionário não será escalado. Para
                                acomodar esse período, o gerador de escalas utilizará as folgas regulares do
                                funcionário, garantindo seu descanso sem gerar folgas adicionais que não estavam
                                previstas.
                            </div>
                            <div class="form-row">
                                <button id="btnGerarEscala" class="primary ml-auto">Gerar Escala</button>
                            </div>
                </div>
            </div>

            <div id="escalaView" class="hidden">
                <div class="card">
                    <button id="btnVoltarPasso3" class="secondary button-voltar">
                        < Voltar para Ajustes</button>
                            <h2 id="escalaViewTitle">Visualização da Escala</h2>
                            <p id="escalaResumo" class="muted" style="margin-top: 16px;"></p>
                            <div id="escalaViewLegenda" class="escala-legenda"></div>
                </div>

                <div class="card card-lista">
                    <div id="escalaTabelaWrap">
                    </div>
                </div>

                <div class="card card-lista">
                    <div id="escalaResumoDetalhado">
                    </div>
                </div>

                <div class="bottom-actions-container">
                    <button id="btnExcluirEscala" class="danger">🔥 Excluir e Gerar Novamente</button>
                    <button id="btnSalvarEscala" class="primary">💾 Salvar Escala</button>
                </div>
            </div>
        </section>

        <section id="page-escalas-salvas" class="page">
            <h1>Escalas Salvas</h1>
            <div id="lista-escalas-container" class="card">
                <h2>Lista de Escalas</h2>
                <ul id="listaEscalas" class="list"></ul>
            </div>

            <div id="escalaSalvaView" class="hidden">
                <div class="card">
                    <button id="btnVoltarParaLista" class="secondary button-voltar">
                        < Voltar para a Lista</button>
                            <h2 id="escalaSalvaViewTitle">Visualização da Escala</h2>
                            <p id="escalaSalvaResumo" class="muted" style="margin-top: 16px;"></p>
                            <div id="escalaSalvaViewLegenda" class="escala-legenda"></div>
                </div>
                <div class="card card-lista">
                    <div id="escalaSalvaTabelaWrap">
                    </div>
                </div>
            </div>
        </section>

        <section id="page-configuracoes" class="page">
            <h1>Configurações</h1>
            <div class="config-grid">
                <div class="card">
                    <h2>Preferências</h2>
                    <div class="form-row">
                        <label>Seu Nome ou Nome da Empresa
                            <input type="text" id="configNome" placeholder="Digite um nome para a saudação" />
                        </label>
                    </div>
                    <div class="form-row">
                        <label>Aparência</label>
                        <div class="toggle-group" id="themeToggleGroup">
                            <button type="button" class="toggle-btn" data-value="light">☀️ Claro</button>
                            <button type="button" class="toggle-btn" data-value="dark">🌙 Escuro</button>
                        </div>
                    </div>
                    <div class="form-row">
                        <button id="btnSalvarConfig" class="primary">💾 Salvar</button>
                    </div>
                </div>
                <div class="card">
                    <h2>Sobre e Suporte</h2>
                    <p class="muted">Precisa de ajuda ou quer saber mais sobre o software?</p>
                    <div class="form-row">
                        <a href="#" id="linkTermosDeUso" style="color: var(--brand);">Ler os Termos de Uso</a>
                    </div>
                </div>
            </div>
            <div class="card card-lista">
                <h2>Ferramentas de Desenvolvedor</h2>
                <p class="muted">Use estas opções para testar o comportamento da aplicação.</p>
                <div class="form-row">
                    <button id="btnReiniciarOnboarding" class="secondary">🔁 Reiniciar Onboarding</button>
                    <button id="btnHardReset" class="danger">🔥 Apagar Todos os Dados (Hard Reset)</button>
                </div>
            </div>
        </section>

        <aside id="editor-toolbox" class="hidden">
            <div class="toolbox-mode-selector">
                <label class="toolbox-mode-label">Editar com:</label>
                <div class="toolbox-mode-buttons">
                    <button class="toolbox-mode-btn" data-mode="cell">🖱️ Célula</button>
                    <button class="toolbox-mode-btn active" data-mode="employee">🎨 Funcionário</button>
                    <button class="toolbox-mode-btn" data-mode="eraser">🗑️ Apagar</button>
                    <button class="toolbox-mode-btn" data-mode="settings">⚙️ Regras</button>
                </div>
            </div>
            <div class="toolbox-header">
                <h3 class="toolbox-title">Caixa de Ferramentas</h3>
                <p class="toolbox-subtitle">Selecione uma célula para editar</p>
            </div>
            <div class="toolbox-content">
                <div class="focused-employee-view">
                    </div>
                <div class="employee-progress-indicator">
                    </div>
            </div>
        </aside>

    </main>

    <div id="modalBackdrop" class="modal-backdrop hidden">
        <div id="modal" class="modal">
            <h3 id="modalTitle"></h3>
            <div id="modalMessage" style="text-align: left; max-height: 400px; overflow-y: auto; padding-right: 16px;">
            </div>
            <div class="modal-actions" style="margin-top: 24px;">
                <button id="modalCancel" class="secondary">Cancelar</button>
                <button id="modalConfirm" class="primary">✓ Confirmar</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden">
        <p id="toastMessage"></p>
    </div>

    <div id="loader-overlay" class="hidden">
        <div class="loader-spinner"></div>
        <p class="loader-text">Gerando escala...</p>
    </div>

    <script src="js/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/store.js"></script>
    <script src="js/turnos.js"></script>
    <script src="js/cargos.js"></script>
    <script src="js/funcionarios.js"></script>
    <script src="js/escalas-gerador.js"></script>
    <script src="js/escalas-interface.js"></script>
    <script src="js/escalas-visualizacao.js"></script>
    <script src="js/escalas.js"></script>
    <script src="js/escalas-salvas.js"></script>
    <script src="js/configuracoes.js"></script>
    <script src="js/editor-manual.js"></script>
    <script src="js/welcome.js"></script>
    <script src="js/main.js"></script>
</body>

</html>